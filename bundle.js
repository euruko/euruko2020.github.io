var app=function(){"use strict";function e(){}function n(e,n){for(const t in n)e[t]=n[t];return e}function t(e){return e()}function o(){return Object.create(null)}function r(e){e.forEach(t)}function c(e){return"function"==typeof e}function i(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function l(e,n){e.appendChild(n)}function u(e,n,t){e.insertBefore(n,t||null)}function a(e){e.parentNode.removeChild(e)}function s(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function p(){return d("")}function m(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function h(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function g(e,n){n=""+n,e.data!==n&&(e.data=n)}let b;function v(e){b=e}const $=[],_=[],k=[],y=[],x=Promise.resolve();let O=!1;function w(e){k.push(e)}function S(){const e=new Set;do{for(;$.length;){const e=$.shift();v(e),C(e.$$)}for(;_.length;)_.pop()();for(let n=0;n<k.length;n+=1){const t=k[n];e.has(t)||(t(),e.add(t))}k.length=0}while($.length);for(;y.length;)y.pop()();O=!1}function C(e){e.fragment&&(e.update(e.dirty),r(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(w))}const E=new Set;let N;function j(e,n){e&&e.i&&(E.delete(e),e.i(n))}function T(e,t){const o=t.token={};function c(e,c,i,l){if(t.token!==o)return;t.resolved=i&&{[i]:l};const u=n(n({},t.ctx),t.resolved),a=e&&(t.current=e)(u);t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==c&&e&&(N={remaining:0,callbacks:[]},function(e,n,t,o){if(e&&e.o){if(E.has(e))return;E.add(e),N.callbacks.push(()=>{E.delete(e),o&&(t&&e.d(1),o())}),e.o(n)}}(e,1,1,()=>{t.blocks[n]=null}),N.remaining||r(N.callbacks))}):t.block.d(1),a.c(),j(a,1),a.m(t.mount(),t.anchor),S()),t.block=a,t.blocks&&(t.blocks[c]=a)}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){if(e.then(e=>{c(t.then,1,t.value,e)},e=>{c(t.catch,2,t.error,e)}),t.current!==t.pending)return c(t.pending,0),!0}else{if(t.current!==t.then)return c(t.then,1,t.value,e),!0;t.resolved={[t.value]:e}}var i}function P(e,n){e.$$.dirty||($.push(e),O||(O=!0,x.then(S)),e.$$.dirty=o()),e.$$.dirty[n]=!0}function q(n,i,l,u,a,s){const d=b;v(n);const f=i.props||{},p=n.$$={fragment:null,ctx:null,props:s,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:o(),dirty:null};let m=!1;var h;p.ctx=l?l(n,f,(e,t)=>{p.ctx&&a(p.ctx[e],p.ctx[e]=t)&&(p.bound[e]&&p.bound[e](t),m&&P(n,e))}):f,p.update(),m=!0,r(p.before_update),p.fragment=u(p.ctx),i.target&&(i.hydrate?p.fragment.l((h=i.target,Array.from(h.childNodes))):p.fragment.c(),i.intro&&j(n.$$.fragment),function(e,n,o){const{fragment:i,on_mount:l,on_destroy:u,after_update:a}=e.$$;i.m(n,o),w(()=>{const n=l.map(t).filter(c);u?u.push(...n):r(n),e.$$.on_mount=[]}),a.forEach(w)}(n,i.target,i.anchor),S()),v(d)}class A{$destroy(){var n,t;t=1,(n=this).$$.fragment&&(r(n.$$.on_destroy),n.$$.fragment.d(t),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}function L(e,n,t){const o=Object.create(e);return o.option=n[t],o}function B(e){var n,t,o,r,c,i,p,g=e.option.description;return{c(){n=s("div"),t=s("input"),o=f(),r=s("label"),c=d(g),i=f(),e.$$binding_groups[0].push(t),h(t,"class","form-checkbox__input"),h(t,"type","checkbox"),t.__value=e.option.name,t.value=t.__value,h(t,"id",e.option.name),h(r,"for",e.option.name),h(r,"class","form-checkbox__text"),h(n,"class","form-checkbox"),p=m(t,"change",e.input_change_handler)},m(a,s){u(a,n,s),l(n,t),t.checked=~e.selectedOptions.indexOf(t.__value),l(n,o),l(n,r),l(r,c),l(n,i)},p(e,n){e.selectedOptions&&(t.checked=~n.selectedOptions.indexOf(t.__value)),t.value=t.__value},d(o){o&&a(n),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(t),1),p()}}}function D(e){var n;return{c(){n=d("Submit")},m(e,t){u(e,n,t)},d(e){e&&a(n)}}}function G(e){var n;return{c(){n=d("Sending")},m(e,t){u(e,n,t)},d(e){e&&a(n)}}}function J(e){var t,o;let r={ctx:e,current:null,token:null,pending:H,then:Y,catch:M,value:"result",error:"error"};return T(o=e.promise,r),{c(){t=p(),r.block.c()},m(e,n){u(e,t,n),r.block.m(e,r.anchor=n),r.mount=(()=>t.parentNode),r.anchor=t},p(t,c){e=c,r.ctx=e,"promise"in t&&o!==(o=e.promise)&&T(o,r)||r.block.p(t,n(n({},e),r.resolved))},d(e){e&&a(t),r.block.d(e),r.token=null,r=null}}}function M(e){var n,t,o=e.error.message;return{c(){n=s("p"),t=d(o),h(n,"class","error svelte-1fi3y4c")},m(e,o){u(e,n,o),l(n,t)},p(e,n){e.promise&&o!==(o=n.error.message)&&g(t,o)},d(e){e&&a(n)}}}function Y(e){var n;function t(e){return e.result.success?F:z}var o=t(e),r=o(e);return{c(){r.c(),n=p()},m(e,t){r.m(e,t),u(e,n,t)},p(e,c){o===(o=t(c))&&r?r.p(e,c):(r.d(1),(r=o(c))&&(r.c(),r.m(n.parentNode,n)))},d(e){r.d(e),e&&a(n)}}}function z(e){var n,t,o=e.result.error;return{c(){n=s("p"),t=d(o),h(n,"class","error svelte-1fi3y4c")},m(e,o){u(e,n,o),l(n,t)},p(e,n){e.promise&&o!==(o=n.result.error)&&g(t,o)},d(e){e&&a(n)}}}function F(n){var t;return{c(){(t=s("p")).textContent="Success! Check your inbox for the confirmation link."},m(e,n){u(e,t,n)},p:e,d(e){e&&a(t)}}}function H(n){var t;return{c(){(t=s("p")).textContent="...waiting"},m(e,n){u(e,t,n)},p:e,d(e){e&&a(t)}}}function I(n){for(var t,o,c,i,d,p,g,b,v,$,_,k,y,x=n.options,O=[],w=0;w<x.length;w+=1)O[w]=B(L(n,x,w));function S(e){return e.loading?G:D}var C=S(n),E=C(n),N=n.promise&&J(n);return{c(){t=s("form"),(o=s("h3")).textContent="Get notified once we know more about the event",c=f(),i=s("input"),d=f(),p=s("div"),(g=s("p")).textContent="Notify me when",b=f();for(var e=0;e<O.length;e+=1)O[e].c();var r;v=f(),$=s("button"),E.c(),k=f(),N&&N.c(),h(o,"class","form-title"),h(i,"class","form-email"),h(i,"type","email"),h(i,"placeholder","Your email address"),i.readOnly=n.loading,i.required=!0,h(g,"class","form-notices__title"),h(p,"class","form-notices"),h($,"class","form-submit"),h($,"type","submit"),$.disabled=_=n.loading||0===n.selectedOptions.length||0===n.email.length,y=[m(i,"input",n.input_input_handler),m(i,"input",n.clearPromise),m(t,"submit",(r=n.handleSubmit,function(e){return e.preventDefault(),r.call(this,e)}))]},m(e,r){u(e,t,r),l(t,o),l(t,c),l(t,i),i.value=n.email,l(t,d),l(t,p),l(p,g),l(p,b);for(var a=0;a<O.length;a+=1)O[a].m(p,null);l(t,v),l(t,$),E.m($,null),l(t,k),N&&N.m(t,null)},p(e,n){if(e.email&&(i.value=n.email),e.loading&&(i.readOnly=n.loading),e.options||e.selectedOptions){x=n.options;for(var o=0;o<x.length;o+=1){const t=L(n,x,o);O[o]?O[o].p(e,t):(O[o]=B(t),O[o].c(),O[o].m(p,null))}for(;o<O.length;o+=1)O[o].d(1);O.length=x.length}C!==(C=S(n))&&(E.d(1),(E=C(n))&&(E.c(),E.m($,null))),(e.loading||e.selectedOptions||e.email)&&_!==(_=n.loading||0===n.selectedOptions.length||0===n.email.length)&&($.disabled=_),n.promise?N?N.p(e,n):((N=J(n)).c(),N.m(t,null)):N&&(N.d(1),N=null)},i:e,o:e,d(e){e&&a(t),function(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}(O,e),E.d(),N&&N.d(),r(y)}}}function K(e,n,t){let o=!1,r=null,c="";const i=[{name:"dates",description:"The dates are confirmed"},{name:"cfp",description:"The call for papers is open"},{name:"tickets",description:"Tickets are available"}];let l=i.map(e=>e.name);const u=[[]];return{loading:o,promise:r,email:c,options:i,selectedOptions:l,handleSubmit:function(e){t("loading",o=!0),t("promise",r=async function(e,n={}){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>(t("loading",o=!1),e.json())).catch(e=>{throw t("loading",o=!1),e})}("https://list.euruko2020.org/register",{email:c,options:l}))},clearPromise:function(){t("promise",r=null)},input_input_handler:function(){c=this.value,t("email",c)},input_change_handler:function(){l=function(e){const n=[];for(let t=0;t<e.length;t+=1)e[t].checked&&n.push(e[t].__value);return n}(u[0]),t("selectedOptions",l)},$$binding_groups:u}}return new class extends A{constructor(e){super(),q(this,e,K,I,i,[])}}({target:document.querySelector("#form")})}();
//# sourceMappingURL=bundle.js.map
